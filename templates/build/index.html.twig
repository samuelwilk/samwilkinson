{% extends 'base.html.twig' %}

{% import 'components/typography.html.twig' as type %}
{% import 'components/placard.html.twig' as placard %}

{% block title %}Build - Sam Wilkinson{% endblock %}

{% block description %}Portfolio of development projects and case studies.{% endblock %}

{% block body_class %}accent-teal{% endblock %}

{% block body %}

{# Hero Section - Compression/Release Rhythm #}
<section class="max-w-7xl mx-auto px-8 py-32 md:py-48">
    <div class="max-w-5xl">
        {# Overline with restrained spacing #}
        {{ type.overline('Developer Portfolio', 'mb-8 text-stone') }}

        {# Hero Title - Prairie Horizontal Emphasis #}
        <h1 class="font-display text-6xl md:text-7xl lg:text-8xl font-normal text-ink mb-12 leading-[0.95] tracking-tighter">
            Build
        </h1>

        {# Metadata - Museum Label Precision #}
        <div class="grid grid-cols-2 gap-16 max-w-2xl mb-20">
            {{ type.pair('Location', 'Canada', '', 'vertical') }}
            {{ type.pair('Current Focus', 'Symfony 7 & AI Integration', '', 'vertical') }}
        </div>

        {# Prairie Line - Architectural Separator #}
        <div class="relative">
            <div class="h-px bg-stone opacity-30 w-full"></div>
            <div class="h-px bg-accent w-32 absolute top-0 left-0"></div>
        </div>
    </div>
</section>

{# Release Space - Generous Negative Space #}
<div class="h-24 md:h-32"></div>

{# Featured Projects - Museum Exhibition Layout #}
{% if projects|length > 0 %}
<section class="max-w-7xl mx-auto px-8 pb-32">
    {# Section Header - Museum Typography #}
    <div class="mb-16">
        {{ type.overline('Selected Work', 'mb-4 text-stone') }}
        <h2 class="font-display text-3xl md:text-4xl text-ink tracking-tight">
            Case Studies
        </h2>
    </div>

    {# Object Grid - Generous Gap for Breathing Room #}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-16">
        {% for project in projects %}
            {# Museum Object Card #}
            <article class="object-card group relative bg-bone overflow-hidden rounded-xl border border-stone/10 transition-all duration-300 ease-out hover:-translate-y-1 shadow-[0_1px_3px_rgba(0,0,0,0.08),0_1px_2px_rgba(0,0,0,0.06)] hover:shadow-[0_4px_6px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.06)]">
                {# Visual Header - Restrained Gradient #}
                <div class="h-56 bg-gradient-to-br from-putty via-bone to-oatmeal relative overflow-hidden border-b border-stone/15">
                    {# Subtle Texture Overlay #}
                    <div class="absolute inset-0 opacity-[0.02]" style="background-image: url('data:image/svg+xml,%3Csvg width=\'200\' height=\'200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noise\'%3E%3CfeTurbulence baseFrequency=\'0.9\' /%3E%3C/filter%3E%3Crect width=\'200\' height=\'200\' filter=\'url(%23noise)\' opacity=\'0.3\' /%3E%3C/svg%3E');"></div>

                    {# Year Badge - Architectural Detail #}
                    {% if project.publishedAt %}
                    <div class="absolute top-6 right-6">
                        <span class="museum-value bg-paper/95 backdrop-blur-sm px-4 py-2 rounded-md text-graphite text-sm border border-stone/25 shadow-sm">
                            {{ project.publishedAt|date('Y') }}
                        </span>
                    </div>
                    {% endif %}

                    {# Minimal Accent Mark - Economy of Motion #}
                    <div class="absolute bottom-0 left-0 w-24 h-px bg-accent transition-all duration-500 group-hover:w-32"></div>
                </div>

                {# Content Area - Museum Label Hierarchy #}
                <div class="p-8">
                    {# Overline #}
                    {{ type.overline('Case Study', 'mb-4 text-stone') }}

                    {# Title - Restrained Hover Color Change #}
                    <h3 class="font-display text-2xl md:text-3xl text-ink mb-4 leading-tight tracking-tight group-hover:text-graphite transition-colors duration-200">
                        {{ project.title }}
                    </h3>

                    {# Role Label (from metrics) #}
                    {% if project.metrics.role is defined %}
                    <div class="museum-label text-stone mb-6 tracking-wide">
                        {{ project.metrics.role }}
                    </div>
                    {% endif %}

                    {# Summary - Generous Leading #}
                    <p class="text-graphite leading-[1.7] mb-8">
                        {{ project.summary }}
                    </p>
                </div>

                {# Inset Caption Rail - Museum Placard Aesthetic #}
                <div class="border-t border-stone/20 bg-putty/40 px-8 py-6">
                    {# Tech Stack Row #}
                    {% if project.tags|length > 0 %}
                    <div class="flex items-baseline justify-between gap-4 mb-3">
                        <span class="museum-label text-stone text-xs tracking-wider">Stack</span>
                        <span class="museum-value text-sm text-graphite text-right">{{ project.tags|join(', ') }}</span>
                    </div>
                    {% endif %}

                    {# Constraints Row - Hairline Separator #}
                    {% if project.metrics.constraint is defined %}
                    <div class="flex items-baseline justify-between gap-4 {% if project.tags|length > 0 %}pt-3 border-t border-stone/10{% endif %}">
                        <span class="museum-label text-stone text-xs tracking-wider">Constraint</span>
                        <span class="museum-value text-sm text-ink text-right">{{ project.metrics.constraint }}</span>
                    </div>
                    {% endif %}
                </div>

                {# Interaction Layer #}
                <a href="{{ path('app_build_show', {slug: project.slug}) }}"
                   class="absolute inset-0 z-10"
                   aria-label="View {{ project.title }} case study">
                </a>
            </article>
        {% endfor %}
    </div>
</section>

{# Prairie Line Transition - Horizontal Emphasis #}
<div class="max-w-7xl mx-auto px-8 py-16">
    <div class="relative">
        <div class="h-px bg-stone opacity-20 w-full"></div>
    </div>
</div>
{% endif %}

{# Skills & Expertise - Terraced Layout #}
<section class="bg-gradient-to-b from-paper via-daylight to-paper">
    <div class="max-w-7xl mx-auto px-8 py-32">
        {# Section Header #}
        <div class="mb-16">
            {{ type.overline('Technical Foundation', 'mb-4 text-stone') }}
            <h2 class="font-display text-3xl md:text-4xl text-ink tracking-tight">
                Skills & Expertise
            </h2>
        </div>

        {# Skills Panels - Inset Surface Treatment #}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl">
            {# Backend #}
            <div class="inset-panel p-8 bg-bone border border-stone/10 rounded-lg shadow-[inset_0_2px_4px_rgba(0,0,0,0.04)]">
                {{ type.label('Backend Development', 'mb-6') }}
                <div class="flex flex-wrap gap-2.5">
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">PHP 8.3</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Symfony 7</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Doctrine ORM</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">API Platform</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Messenger</span>
                </div>
            </div>

            {# Database #}
            <div class="inset-panel p-8 bg-bone border border-stone/10 rounded-lg shadow-[inset_0_2px_4px_rgba(0,0,0,0.04)]">
                {{ type.label('Database & Caching', 'mb-6') }}
                <div class="flex flex-wrap gap-2.5">
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">PostgreSQL</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">MySQL</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Redis</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Elasticsearch</span>
                </div>
            </div>

            {# DevOps #}
            <div class="inset-panel p-8 bg-bone border border-stone/10 rounded-lg shadow-[inset_0_2px_4px_rgba(0,0,0,0.04)]">
                {{ type.label('DevOps & Infrastructure', 'mb-6') }}
                <div class="flex flex-wrap gap-2.5">
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Docker</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Kubernetes</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Terraform</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">GitHub Actions</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">AWS</span>
                </div>
            </div>

            {# Frontend #}
            <div class="inset-panel p-8 bg-bone border border-stone/10 rounded-lg shadow-[inset_0_2px_4px_rgba(0,0,0,0.04)]">
                {{ type.label('Frontend', 'mb-6') }}
                <div class="flex flex-wrap gap-2.5">
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">JavaScript/TypeScript</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Vue</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">React</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Stimulus</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Tailwind CSS</span>
                    <span class="px-3.5 py-1.5 bg-paper rounded-md text-sm text-graphite border border-stone/20 transition-colors duration-200 hover:border-stone/30 hover:bg-daylight">Twig</span>
                </div>
            </div>
        </div>
    </div>
</section>

{# Prairie Line Transition #}
<div class="max-w-7xl mx-auto px-8 py-16">
    <div class="relative">
        <div class="h-px bg-stone opacity-20 w-full"></div>
    </div>
</div>

{# Experience Timeline - Compressed Section #}
<section class="max-w-7xl mx-auto px-8 pb-32">
    <div class="mb-16">
        {{ type.overline('Professional History', 'mb-4 text-stone') }}
        <h2 class="font-display text-3xl md:text-4xl text-ink tracking-tight">
            Experience
        </h2>
    </div>

    {% set mockExperience = [
        {date: '2022 – Present', event: 'Developer @ zu'},
        {date: 'Feb 2020 – Oct 2021', event: 'Programmer Analyst @ University of Saskatchewan'}
    ] %}

    {{ placard.timeline(mockExperience, 'max-w-4xl') }}
</section>

{# Release Space #}
<div class="h-24 md:h-32"></div>

{% endblock %}
